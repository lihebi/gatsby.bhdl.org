{"componentChunkName":"component---src-templates-docs-js","path":"/docs/install/","result":{"data":{"markdownRemark":{"html":"<h1 id=\"bhdl-installation-guide\" style=\"position:relative;\"><a href=\"#bhdl-installation-guide\" aria-label=\"bhdl installation guide permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>BHDL Installation Guide</h1>\n<p>Warning: we are on pre-alpha release, please expect breaking changes in APIs.</p>\n<h2 id=\"installation\" style=\"position:relative;\"><a href=\"#installation\" aria-label=\"installation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Installation</h2>\n<p>Step 1: install <a href=\"https://racket-lang.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">racket</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">apt install racket</code></pre></div>\n<p>IMPORTANT: racket v7.8 seems to be broken! The cc-find will return negative values. That's apparently a bug of either racket v7.8 or the bundled pict library. Use v7.7 instead. Links to the download pages:</p>\n<ul>\n<li><a href=\"https://download.racket-lang.org/all-versions.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">all versions</a></li>\n<li><a href=\"https://download.racket-lang.org/racket-v7.7.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">v7.7</a></li>\n</ul>\n<p>Step 2: Install the BHDL directly as a racket package:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">raco pkg install git://github.com/lihebi/bhdl/?path=bhdl-lib</code></pre></div>\n<p>In the future, you can update the package if there're updates upstream via:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">raco pkg update bhdl-lib</code></pre></div>\n<p>You will also need the footprint libraries and set the ENV variable\n<code class=\"language-text\">BHDL_LIBRARY_PATH</code> to the local path.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git clone --recursive https://github.com/lihebi/bhdl-footprints\nexport BHDL_LIBRARY_PATH=/path/to/bhdl-footprints</code></pre></div>\n<h2 id=\"running-via-the-jupyter-kernel\" style=\"position:relative;\"><a href=\"#running-via-the-jupyter-kernel\" aria-label=\"running via the jupyter kernel permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Running via the Jupyter Kernel</h2>\n<p>In general, you can run racket programs via command line, editor plugins, IDEs. We are not covering them here. Instead, we recommand run the program via jupyter notebook. To set it up, first install jupyter:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">pip install jupyterlab notebook</code></pre></div>\n<p>Then install the iracket kernel:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git clone https://github.com/lihebi/iracket\ncd iracket &amp;&amp; git checkout dev &amp;&amp;\\\n   raco pkg install --deps search-auto\nraco iracket install</code></pre></div>\n<p>Note that we made some fix to the upstream iracket kernel (<a href=\"https://github.com/rmculpepper/iracket\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">rmculpepper/iracket</a>), and you need to clone our repo (<a href=\"https://github.com/lihebi/iracket\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">lihebi/iracket</a>) and switch to <code class=\"language-text\">dev</code> branch.</p>\n<p>Then start the jupyter notebook server:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd /path/to/bhdl-test\njupyter notebook</code></pre></div>\n<p>You might want to open the example notebooks:</p>\n<!-- TODO rename fitboard to BHDL-Key -->\n<ul>\n<li><a href=\"bhdl-test/fitboard.ipynb\">BHDL-Key</a>: an ergonomic keyboard</li>\n<li><a href=\"bhdl-test/onebutton.ipynb\">onebutton</a>: a pushbutton board: <a href=\"https://github.com/forrestbao/onebutton\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/forrestbao/onebutton</a></li>\n<li><a href=\"bhdl-test/spreadboard.ipynb\">Arduino Spreadboard</a>: an multi-dock for different form-factor Arduinos</li>\n</ul>\n<p>One caveat to notice: the iRacket kernel seems to have problem when \"restarting the kernel\". The walk-around is to \"shutdown the kernel\" and \"start it again\".</p>\n<h2 id=\"optional-placement-engine\" style=\"position:relative;\"><a href=\"#optional-placement-engine\" aria-label=\"optional placement engine permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(optional) placement engine</h2>\n<p>To run the placement engine, you need setup\n<a href=\"https://julialang.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">julia</a>. Refer to their installation guide on how to\ninstall Julia.</p>\n<p>Julia has its own package management and environment, so you can setup the\npackages easily. In the <code class=\"language-text\">placement</code> folder, install the package by:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">julia --project\n]instantiate</code></pre></div>\n<p>You run the placement server via:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd placement\njulia --project main.jl</code></pre></div>\n<p>Note that you only need the placement engine when you use the <code class=\"language-text\">circuit-export</code> API with <code class=\"language-text\">#:auto-place #t</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"racket\"><pre class=\"language-racket\"><code class=\"language-racket\"><span class=\"token punctuation\">(</span><span class=\"token function\">circuit-export</span> three-button #:auto-place <span class=\"token boolean\">#t</span> ...<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Some future features to notice:</p>\n<ul>\n<li>We will be adding management of placement engine directly in BHDL code</li>\n<li>currently the placement engine uses GPU. We'll be making it compatible with CPU only setup, but that might be substantially slower than on GPU machines.</li>\n</ul>\n<h2 id=\"optional-freerouting\" style=\"position:relative;\"><a href=\"#optional-freerouting\" aria-label=\"optional freerouting permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(optional) freerouting</h2>\n<p>To use routing, you need to have\n<a href=\"https://github.com/freerouting/freerouting\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">freerouting</a> available. We tested\non\n<a href=\"https://github.com/freerouting/freerouting/releases/tag/v1.4.4\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">freerouting-v1.4.4</a>. Make\nsure <code class=\"language-text\">freerouting-1.4.4-executable.jar</code> is available in your <code class=\"language-text\">$PATH</code>.</p>\n<p>The executable can be downloaded <a href=\"https://bintray.com/miho/Freerouting/download_file?file_path=eu%2Fmihosoft%2Ffreerouting%2Ffreerouting%2F1.4.4%2Ffreerouting-1.4.4-executable.jar\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a> on the new freerouting maintainer website: <a href=\"https://freerouting.mihosoft.eu/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://freerouting.mihosoft.eu/</a></p>\n<p>UPDATE: the jar file is often not an executable command. You'll need</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">java -jar freerouting-1.4.4-executable.jar</code></pre></div>\n<p>Thus, you need to create a executable called <code class=\"language-text\">freerouting</code>, containing:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">#!/bin/bash\njava -jar /path/to/freerouting-1.4.4-executable.jar</code></pre></div>\n<p>freerouting will need X11 window, even if we are running it in command line. Simulate the X11 session via:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt install xvfb\nXvfb :1</code></pre></div>\n<p>But it seems to be impossible to view the progress. We'll probably need to use VNC if we really want to know what's going on.</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#bhdl-installation-guide\">BHDL Installation Guide</a></p>\n<ul>\n<li><a href=\"#installation\">Installation</a></li>\n<li><a href=\"#running-via-the-jupyter-kernel\">Running via the Jupyter Kernel</a></li>\n<li><a href=\"#optional-placement-engine\">(optional) placement engine</a></li>\n<li><a href=\"#optional-freerouting\">(optional) freerouting</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"Installation"}}},"pageContext":{"slug":"/docs/install/"}},"staticQueryHashes":["3649515864"]}